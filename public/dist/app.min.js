!function(){"use strict";function r(r,e){r.logout(),e.go("home")}angular.module("app",["ui.router","angular-jwt","angular-storage","home","tradeBinders","account","account.UserService","cardShops","search"]).controller("appController",["UserService","$state",r]).config(["jwtInterceptorProvider","$httpProvider","$locationProvider","$stateProvider",function(r,e,t,n){r.tokenGetter=function(r){return r.get("jwt")},e.interceptors.push("jwtInterceptor"),n.state("logout",{controller:"appController"})}]).run(function(r,e,t,n,o,a){r.$on("$stateChangeStart",function(r,i){i.data&&i.data.requiresLogin&&(!o.get("jwt")||a.isTokenExpired(o.get("jwt")))&&(r.preventDefault(),e.go("login")),t.get("app/account/register/register.html",{cache:n}),t.get("app/account/login/login.html",{cache:n}),t.get("app/tradeBinders/tradeBinders.html",{cache:n}),t.get("app/search/search.html",{cache:n}),t.get("app/cardShops/cardShops.html",{cache:n})})})}(),function(){"use strict";function r(){}angular.module("account.accountController",[]).controller("accountController",[r])}(),function(){"use strict";angular.module("account",["account.accountController","account.register","account.login"]).config(["$stateProvider",function(r){r.state("account",{url:"/tradeBinder/account",templateUrl:"app/account/account.html",controller:"accountController",resolve:[],data:{requiresLogin:!0}})}])}(),function(){"use strict";angular.module("cardShops",["ui.router"]).config(["$stateProvider","$locationProvider",function(r,e){r.state("cardShops",{url:"/tradeBinder/cardShops",templateUrl:"app/cardShops/cardShops.html",resolve:[]})}])}(),function(){"use strict";function r(r,e){var t=this;t.loggedIn=e.isLoggedIn(),t.user=e.currentUser(),t.secure=function(){return r.get("/api/secure").then(function(r){alert(r.data.message)},function(r){alert("You're not authed")})}}angular.module("home.HomeController",["account.UserService"]).controller("HomeController",["$http","UserService",r])}(),function(){"use strict";angular.module("home",["home.HomeController"]).config(["$stateProvider",function(r){r.state("home",{url:"/",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"home",resolve:[]})}])}(),function(){"use strict";function r(r){var e=this;e.cards=[],e.searchSubmit=function(t){r.getCards(t).success(function(r){e.cards=r}),e.search=""}}angular.module("search.SearchController",["search.SearchFactory"]).controller("SearchController",["SearchFactory",r])}(),function(){"use strict";function r(r){var e={};return e.getCards=function(e){return r({method:"GET",url:"https://api.deckbrew.com/mtg/cards?name="+e,skipAuthorization:!0})},e}angular.module("search.SearchFactory",[]).factory("SearchFactory",["$http",r])}(),function(){"use strict";angular.module("search",["ui.router","search.SearchController"]).config(["$stateProvider","$httpProvider",function(r,e){r.state("search",{url:"/tradeBinder/search",templateUrl:"app/search/search.html",controller:"SearchController",controllerAs:"search",resolve:[]})}])}(),function(){"use strict";function r(r){var e=this;e.cards=r.getCards(),e.sortType="name",e.sortReverse=!1,e.addCards=function(t){t.length>0&&(r.addCards(t),e.cards=r.getCards(),e.addList=[])},e.removeCard=function(e){r.removeCard(e)},e.upOwnedQuantity=function(e){r.upOwnedCardQuantity(e)},e.lowerOwnedQuantity=function(e){r.lowerOwnedCardQuantity(e)},e.upWantQuantity=function(e){r.upWantCardQuantity(e)},e.lowerWantQuantity=function(e){r.lowerWantCardQuantity(e)},e.upForTradeQuantity=function(e){r.upForTradeCardQuantity(e)},e.lowerForTradeQuantity=function(e){r.lowerForTradeCardQuantity(e)}}angular.module("tradeBinders.TradeBindersController",["TradeBinder.TradeBindersFactory"]).controller("TradeBindersController",["TradeBindersFactory",r])}(),function(){"use strict";function r(){return{restrict:"A",template:"<span>{{name}}</span>",link:function(r,e,t){r.name=t.name,$(e).popover({trigger:"hover",html:!0,content:"<img src="+t.cardImage+">",placement:"bottom"})}}}angular.module("tradeBinders.tradeBindersDirective",["ui.router"]).directive("tradeBindersDirective",r)}(),function(){"use strict";function r(r){var n=[];return{getCards:function(){return n},addCards:function(o){o.split("\n").forEach(function(o){var a={name:t(o),num:e(o)};r.getCards(t(o)).success(function(r){r.filter(function(r){return r.name.toUpperCase()===a.name.toUpperCase()}).forEach(function(r){var e;e=0!==r.editions[0].multiverse_id?r.editions[0].image_url:r.editions[1].image_url,n.push({name:r.name,ownedQuantity:a.num,forTrade:0,want:0,image:e})})})})},removeCard:function(r){var e=n.indexOf(r);n.splice(e,1)},upOwnedCardQuantity:function(r){var e=n.indexOf(r);n[e].ownedQuantity+=1},lowerOwnedCardQuantity:function(r){var e=n.indexOf(r);n[e].ownedQuantity>=1&&(n[e].ownedQuantity-=1)},upWantCardQuantity:function(r){var e=n.indexOf(r);n[e].want+=1},lowerWantCardQuantity:function(r){var e=n.indexOf(r);n[e].want>=1&&(n[e].want-=1)},upForTradeCardQuantity:function(r){var e=n.indexOf(r);n[e].forTrade+=1},lowerForTradeCardQuantity:function(r){var e=n.indexOf(r);n[e].forTrade>=1&&(n[e].forTrade-=1)}}}angular.module("TradeBinder.TradeBindersFactory",["search.SearchFactory"]).factory("TradeBindersFactory",["SearchFactory",r]);var e=function(r){var e=r.indexOf(" "),t=r.substring(0,e);return isNaN(t)?1:Number(t)},t=function(r){var e=r.indexOf(" "),t=r.substring(0,e);return isNaN(t)?r:r.substring(e+1).replace(/\s+/g," ").trim()}}(),function(){"use strict";angular.module("tradeBinders",["ui.router","tradeBinders.TradeBindersController","tradeBinders.tradeBindersDirective"]).config(["$stateProvider",function(r){r.state("tradeBinders",{url:"/tradeBinder/tradeBinders",templateUrl:"app/tradeBinders/tradeBinders.html",controller:"TradeBindersController",controllerAs:"tradeBinder",resolve:[]})}])}(),function(){"use strict";function r(r,e,t){function n(){e.remove("jwt")}function o(e){return n(),r.post("/api/accounts/register",e).then(u,s("Error creating user"))}function a(e){return n(),r.post("/api/accounts/login",e).then(u,s("Error loggin in"))}function i(){return e.get("jwt")?!t.isTokenExpired(e.get("jwt")):!1}function c(){var r;return i()?(r=t.decodeToken(e.get("jwt")),r.user):void 0}function u(r){return e.set("jwt",r.data.token),{success:!0,data:r.data}}function s(r){return function(){return{success:!1,message:r}}}var l={};return l.register=o,l.login=a,l.logout=n,l.isLoggedIn=i,l.currentUser=c,l}angular.module("account.UserService",[]).factory("UserService",["$http","store","jwtHelper",r])}(),function(){"use strict";function r(r,e){function t(){o.dataLoading=!0;var t={username:o.username,password:o.password};e.login(t).then(function(e){e.success?r.go("home"):(alert(e.message),o.dataLoading=!1),n()})}function n(){o.username="",o.password=""}var o=this;o.loginSubmit=t}angular.module("account.login.LoginController",["account.UserService"]).controller("LoginController",["$state","UserService",r])}(),function(){"use strict";angular.module("account.login",["account.login.LoginController"]).config(["$stateProvider",function(r){r.state("login",{url:"/tradeBinder/login",templateUrl:"app/account/login/login.html",controller:"LoginController",controllerAs:"login",resolve:[]})}])}(),function(){"use strict";function r(r,e){function t(){o.dataLoading=!0;var t={name:o.name,email:o.email,username:o.username,password:o.password};e.register(t).then(function(e){e.success?(console.log("Success"),r.go("home")):(alert(e.message),o.dataLoading=!1)}),n()}function n(){o.name="",o.email="",o.username="",o.password=""}var o=this;o.registerSubmit=t}angular.module("account.register.RegisterController",["account.UserService"]).controller("RegisterController",["$state","UserService",r])}(),function(){"use strict";angular.module("account.register",["account.register.RegisterController"]).config(["$stateProvider",function(r){r.state("register",{url:"/tradeBinder/register",templateUrl:"app/account/register/register.html",controller:"RegisterController",controllerAs:"register",resolve:[]})}])}();
//# sourceMappingURL=app.min.js.map

!function(){"use strict";angular.module("app",["ui.router","angular-jwt","angular-storage","home","tradeBinders","account","cardShops","search","app.appConfig"]).run(["$rootScope","$state","$http","$templateCache","store","jwtHelper",function(e,r,t,n,o,a){e.$on("$stateChangeStart",function(e,i){i.data&&i.data.requiresLogin&&(!o.get("jwt")||a.isTokenExpired(o.get("jwt")))&&(e.preventDefault(),r.go("login")),t.get("app/account/register/register.html",{cache:n}),t.get("app/account/login/login.html",{cache:n}),t.get("app/tradeBinders/tradeBinders.html",{cache:n}),t.get("app/search/search.html",{cache:n}),t.get("app/cardShops/cardShops.html",{cache:n})})}])}(),function(){"use strict";function e(e,r){e.logout(),r.go("home")}angular.module("app.appController",["account.UserService"]).controller("appController",["UserService","$state",e])}(),function(){"use strict";angular.module("app.appConfig",["angular-jwt","app.appController"]).config(["jwtInterceptorProvider","$httpProvider","$stateProvider",function(e,r,t){e.tokenGetter=["store",function(e){return e.get("jwt")}],r.interceptors.push("jwtInterceptor"),t.state("logout",{controller:"appController"})}])}(),function(){"use strict";function e(){}angular.module("account.accountController",[]).controller("accountController",[e])}(),function(){"use strict";angular.module("account",["account.accountController","account.register","account.login"]).config(["$stateProvider",function(e){e.state("account",{url:"/tradeBinder/account",templateUrl:"app/account/account.html",controller:"accountController",resolve:[],data:{requiresLogin:!0}})}])}(),function(){"use strict";angular.module("cardShops",[]).config(["$stateProvider","$locationProvider",function(e,r){e.state("cardShops",{url:"/tradeBinder/cardShops",templateUrl:"app/cardShops/cardShops.html",resolve:[]})}])}(),function(){"use strict";function e(e,r){var t=this;t.loggedIn=r.isLoggedIn(),t.user=r.currentUser(),t.secure=function(){return e.get("/api/secure").then(function(e){alert(e.data.message)},function(e){alert("You're not authed")})}}angular.module("home.HomeController",["account.UserService"]).controller("HomeController",["$http","UserService",e])}(),function(){"use strict";angular.module("home",["home.HomeController"]).config(["$stateProvider",function(e){e.state("home",{url:"/",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"home",resolve:[]})}])}(),function(){"use strict";function e(e){var r=this;r.cards=[],r.searchSubmit=function(t){e.getCards(t).success(function(e){r.cards=e}),r.search=""}}angular.module("search.SearchController",["search.SearchFactory"]).controller("SearchController",["SearchFactory",e])}(),function(){"use strict";function e(e){var r={};return r.getCards=function(r){return e({method:"GET",url:"https://api.deckbrew.com/mtg/cards?name="+r,skipAuthorization:!0})},r}angular.module("search.SearchFactory",[]).factory("SearchFactory",["$http",e])}(),function(){"use strict";angular.module("search",["search.SearchController"]).config(["$stateProvider",function(e){e.state("search",{url:"/tradeBinder/search",templateUrl:"app/search/search.html",controller:"SearchController",controllerAs:"search",resolve:[]})}])}(),function(){"use strict";function e(e){var r=this;r.cards=e.getCards(),r.sortType="name",r.sortReverse=!1,r.addCards=function(t){t.length>0&&(e.addCards(t),r.cards=e.getCards(),r.addList=[])},r.removeCard=function(r){e.removeCard(r)},r.upOwnedQuantity=function(r){e.upOwnedCardQuantity(r)},r.lowerOwnedQuantity=function(r){e.lowerOwnedCardQuantity(r)},r.upWantQuantity=function(r){e.upWantCardQuantity(r)},r.lowerWantQuantity=function(r){e.lowerWantCardQuantity(r)},r.upForTradeQuantity=function(r){e.upForTradeCardQuantity(r)},r.lowerForTradeQuantity=function(r){e.lowerForTradeCardQuantity(r)}}angular.module("tradeBinders.TradeBindersController",["TradeBinder.TradeBindersFactory"]).controller("TradeBindersController",["TradeBindersFactory",e])}(),function(){"use strict";function e(){return{restrict:"A",template:"<span>{{name}}</span>",link:function(e,r,t){e.name=t.name,$(r).popover({trigger:"hover",html:!0,content:"<img src="+t.cardImage+">",placement:"bottom"})}}}angular.module("tradeBinders.tradeBindersDirective",[]).directive("tradeBindersDirective",[e])}(),function(){"use strict";function e(e){var n=[];return{getCards:function(){return n},addCards:function(o){o.split("\n").forEach(function(o){var a={name:t(o),num:r(o)};e.getCards(t(o)).success(function(e){e.filter(function(e){return e.name.toUpperCase()===a.name.toUpperCase()}).forEach(function(e){var r;r=0!==e.editions[0].multiverse_id?e.editions[0].image_url:e.editions[1].image_url,n.push({name:e.name,ownedQuantity:a.num,forTrade:0,want:0,image:r})})})})},removeCard:function(e){var r=n.indexOf(e);n.splice(r,1)},upOwnedCardQuantity:function(e){var r=n.indexOf(e);n[r].ownedQuantity+=1},lowerOwnedCardQuantity:function(e){var r=n.indexOf(e);n[r].ownedQuantity>=1&&(n[r].ownedQuantity-=1)},upWantCardQuantity:function(e){var r=n.indexOf(e);n[r].want+=1},lowerWantCardQuantity:function(e){var r=n.indexOf(e);n[r].want>=1&&(n[r].want-=1)},upForTradeCardQuantity:function(e){var r=n.indexOf(e);n[r].forTrade+=1},lowerForTradeCardQuantity:function(e){var r=n.indexOf(e);n[r].forTrade>=1&&(n[r].forTrade-=1)}}}angular.module("TradeBinder.TradeBindersFactory",["search.SearchFactory"]).factory("TradeBindersFactory",["SearchFactory",e]);var r=function(e){var r=e.indexOf(" "),t=e.substring(0,r);return isNaN(t)?1:Number(t)},t=function(e){var r=e.indexOf(" "),t=e.substring(0,r);return isNaN(t)?e:e.substring(r+1).replace(/\s+/g," ").trim()}}(),function(){"use strict";angular.module("tradeBinders",["tradeBinders.TradeBindersController","tradeBinders.tradeBindersDirective"]).config(["$stateProvider",function(e){e.state("tradeBinders",{url:"/tradeBinder/tradeBinders",templateUrl:"app/tradeBinders/tradeBinders.html",controller:"TradeBindersController",controllerAs:"tradeBinder",resolve:[]})}])}(),function(){"use strict";function e(e,r){function t(){o.dataLoading=!0;var t={username:o.username,password:o.password};r.login(t).then(function(r){r.success?e.go("home"):(alert(r.message),o.dataLoading=!1),n()})}function n(){o.username="",o.password=""}var o=this;o.loginSubmit=t}angular.module("account.login.LoginController",["account.UserService"]).controller("LoginController",["$state","UserService",e])}(),function(){"use strict";angular.module("account.login",["account.login.LoginController"]).config(["$stateProvider",function(e){e.state("login",{url:"/tradeBinder/login",templateUrl:"app/account/login/login.html",controller:"LoginController",controllerAs:"login",resolve:[]})}])}(),function(){"use strict";function e(e,r,t){function n(){r.remove("jwt")}function o(r){return n(),e.post("/api/accounts/register",r).then(u,s("Error creating user"))}function a(r){return n(),e.post("/api/accounts/login",r).then(u,s("Error loggin in"))}function i(){return r.get("jwt")?!t.isTokenExpired(r.get("jwt")):!1}function c(){var e;return i()?(e=t.decodeToken(r.get("jwt")),e.user):void 0}function u(e){return r.set("jwt",e.data.token),{success:!0,data:e.data}}function s(e){return function(){return{success:!1,message:e}}}var l={};return l.register=o,l.login=a,l.logout=n,l.isLoggedIn=i,l.currentUser=c,l}angular.module("account.UserService",[]).factory("UserService",["$http","store","jwtHelper",e])}(),function(){"use strict";function e(e,r){function t(){o.dataLoading=!0;var t={name:o.name,email:o.email,username:o.username,password:o.password};r.register(t).then(function(r){r.success?(console.log("Success"),e.go("home")):(alert(r.message),o.dataLoading=!1)}),n()}function n(){o.name="",o.email="",o.username="",o.password=""}var o=this;o.registerSubmit=t}angular.module("account.register.RegisterController",["account.UserService"]).controller("RegisterController",["$state","UserService",e])}(),function(){"use strict";angular.module("account.register",["account.register.RegisterController"]).config(["$stateProvider",function(e){e.state("register",{url:"/tradeBinder/register",templateUrl:"app/account/register/register.html",controller:"RegisterController",controllerAs:"register",resolve:[]})}])}();
//# sourceMappingURL=app.min.js.map
